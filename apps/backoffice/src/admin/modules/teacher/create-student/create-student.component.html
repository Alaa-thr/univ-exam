<div class="row">
    <div class="col-sm-12">
        <div class="card">
            <div class="card-body">
                <div class="page-header">
                    <div class="row align-items-center">
                        <div class="col">
                            <h3 class="page-title">Add Student</h3>
                        </div>
                    </div>
                </div>
                <form [formGroup]="form" (ngSubmit)="createStudent()">
                    <div class="row">
                        <div class="row" formGroupName="student">
                            <div class="col-12 col-sm-6">
                                <div class="form-group">
                                    <label>First Name</label>
                                    <input type="text" class="form-control" formControlName="firstName"
                                        [ngClass]="{'is-invalid':firstName.invalid && (firstName.dirty || firstName.touched)}">
                                    <div *ngIf="firstName.invalid && (firstName.dirty || firstName.touched)">
                                        <div *ngIf="firstName.errors?.['required']" class="text-danger">
                                            First name is required.
                                        </div>
                                        <div *ngIf="firstName.errors?.['minlength']" class="text-danger">
                                            First name must be at least 3 characters long.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-sm-6">
                                <div class="form-group">
                                    <label>Last Name</label>
                                    <input type="text" class="form-control" formControlName="lastName"
                                        [ngClass]="{'is-invalid':lastName.invalid && (lastName.dirty || lastName.touched)}">
                                    <div *ngIf="lastName.invalid && (lastName.dirty || lastName.touched)">
                                        <div *ngIf="lastName.errors?.['required']" class="text-danger">
                                            Last name is required.
                                        </div>
                                        <div *ngIf="lastName.errors?.['minlength']" class="text-danger">
                                            Last name must be at least 3 characters long.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-sm-6">
                                <div class="form-group">
                                    <label>Birthday</label>
                                    <input type="date" class="form-control" formControlName="birthDate"
                                        [ngClass]="{'is-invalid':birthDate.invalid && (birthDate.dirty || birthDate.touched)}">
                                    <div *ngIf="birthDate.invalid && (birthDate.dirty || birthDate.touched)">
                                        <div *ngIf="birthDate.errors?.['required']" class="text-danger">
                                            Birthday is required.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-sm-6">
                                <div class="form-group">
                                    <label>Phone Number</label>
                                    <input type="text" class="form-control" formControlName="phoneNumber"
                                        [ngClass]="{'is-invalid':phoneNumber.invalid && (phoneNumber.dirty || phoneNumber.touched)}">
                                    <div *ngIf="phoneNumber.invalid && (phoneNumber.dirty || phoneNumber.touched)">
                                        <div *ngIf="phoneNumber.errors?.['required']" class="text-danger">
                                            Phone number is required.
                                        </div>
                                        <div *ngIf="phoneNumber.errors?.['minlength']" class="text-danger">
                                            Phone number must be at least 10 characters long.
                                        </div>
                                        <div *ngIf="phoneNumber.errors?.['maxlength']" class="text-danger">
                                            Phone number must be at mac 10 characters long.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-sm-6">
                                <div class="form-group">
                                    <label>Student Number</label>
                                    <input type="text" class="form-control" formControlName="studentNumber"
                                        [ngClass]="{'is-invalid':(studentNumber.invalid && (studentNumber.dirty || studentNumber.touched)) || (error)}">
                                    <div
                                        *ngIf="studentNumber.invalid && (studentNumber.dirty || studentNumber.touched)">
                                        <div *ngIf="studentNumber.errors?.['required']" class="text-danger">
                                            Student Number is required.
                                        </div>
                                        <div *ngIf="studentNumber.errors?.['minlength']" class="text-danger">
                                            Student Number must be at least 12 characters long.
                                        </div>
                                    </div>
                                    <div *ngIf="error" class="text-danger" (keypress)="error=''">
                                        this student number is already exist.
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-sm-6">
                                <div class="form-group">
                                    <label>Speciality</label>
                                    <select class="form-select" formControlName="speciality"
                                        [ngClass]="{'is-invalid':speciality.invalid && (speciality.dirty || speciality.touched)}"
                                        (change)="getLevel($event)">
                                        <option value="" selected disabled>Select Speciality</option>
                                        <option *ngFor="let speciality of specialities" [value]="speciality.id">
                                            {{speciality.name | capitalizeLetter: 'first'}}</option>
                                    </select>
                                    <div *ngIf="speciality.invalid && (speciality.dirty || speciality.touched)">
                                        <div *ngIf="speciality.errors?.['required']" class="text-danger">
                                            Speciality is required.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-sm-6">
                                <div class="form-group">
                                    <label value="">Level</label>
                                    <select class="form-select" formControlName="level"
                                        [ngClass]="{'is-invalid':level.invalid && (level.dirty || level.touched)}">
                                        <option value="" selected disabled>Select Level</option>
                                        <option *ngFor="let level of levels" [value]="level.id">{{level.name |
                                            capitalizeLetter: 'first'}}</option>
                                    </select>
                                    <div *ngIf="level.invalid && (level.dirty || level.touched)">
                                        <div *ngIf="level.errors?.['required']" class="text-danger">
                                            Level is required.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-6">
                            <div class="form-group">
                                <label>email</label>
                                <input type="email" class="form-control" formControlName="email"
                                    [ngClass]="{'is-invalid':email.invalid && (email.dirty || email.touched)}">
                                <div *ngIf="email.invalid && (email.dirty || email.touched)">
                                    <div *ngIf="email.errors?.['required']" class="text-danger">
                                        email is required.
                                    </div>
                                    <div *ngIf="email.errors?.['email']" class="text-danger">
                                        need to be a real email.
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-6">
                            <div class="form-group">
                                <label>Password</label>
                                <input type="password" class="form-control" formControlName="password"
                                    [ngClass]="{'is-invalid':password.invalid && (password.dirty || password.touched)}">
                                <div *ngIf="password.invalid && (password.dirty || password.touched)">
                                    <div *ngIf="password.errors?.['required']" class="text-danger">
                                        password is required.
                                    </div>
                                    <div *ngIf="password.errors?.['pattern']" class="text-danger">
                                        password is too weak, choose a stronger password between 6 and 12 characters and
                                        contains capital and small letter and digits.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="text-end m-t-20">
                        <button type="submit" class="btn btn-primary" [disabled]="form.invalid">Add Student</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>